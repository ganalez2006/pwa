<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Test PWA</title>
	<link rel="manifest" href="./manifest.json">
	<link rel="shortcut icon" type="image/x-icon" href="./images/icons/launcher-icon-1x.png"/>

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />
	<link rel="profile" href="http://gmpg.org/xfn/11">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="description" content="Test PWA"/>

	<style>
	.hide {
		display: none;
	}
	</style>
</head>
<body>
	<h1>Test PWA</h1>

	<div id="msgServiceUnsupported" class="hide">
		<p>
			Mensaje servicio no soportado
		</p>
	</div>

	<div id="msgNotificationDenied" class="hide">
		<p>
			Mensaje Notificaiones bloqueadas
		</p>
	</div>

	<button id="btnSubscription" class="hide">Habilitar notificaciones</button>

	<hr>

	<a href="image.html">Image</a>
	<a href="otra.html">Otra</a>
	<a href="error.html">error</a>

	<ul id="listLog"></ul>

	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
	https://firebase.google.com/docs/web/setup#available-libraries -->

	<script>
	// Your web app's Firebase configuration
	var firebaseConfig = {
		apiKey: "AIzaSyCuMQvWQDrPlsx4g24Ym2RNo3jd5Ts2bkE",
		authDomain: "test-pwa-6be03.firebaseapp.com",
		databaseURL: "https://test-pwa-6be03.firebaseio.com",
		projectId: "test-pwa-6be03",
		storageBucket: "test-pwa-6be03.appspot.com",
		messagingSenderId: "228335643470",
		appId: "1:228335643470:web:e478c73ea06b9c6b858c1f"
	};
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);

	// Retrieve Firebase Messaging object.
	const messaging = firebase.messaging();
	// Add the public key generated from the console here.
	messaging.usePublicVapidKey("BD1q7scbIb_UGTNaRkU6MeHQrFx8FJnRjRUvT415NyhYzaer44Lsa7uldgPchm75xvprGc1n-PUNQUVxW6yZqqo");

	// Get Instance ID token. Initially this makes a network call, once retrieved
	// subsequent calls to getToken will return from cache.
	messaging.getToken().then((currentToken) => {
		if (currentToken) {
			sendTokenToServer(currentToken);
			updateUIForPushEnabled(currentToken);
		} else {
			// Show permission request.
			console.log('No Instance ID token available. Request permission to generate one.');
			// Show permission UI.
			updateUIForPushPermissionRequired();
			setTokenSentToServer(false);
		}
	}).catch((err) => {
		console.log('An error occurred while retrieving token. ', err);
		showToken('Error retrieving Instance ID token. ', err);
		setTokenSentToServer(false);
	});

	</script>
	<script src="js/app.js"></script>
</body>
</html>